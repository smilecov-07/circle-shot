# Создание скинов

## Общая инструкция

1. Создайте папку в `game/skins/<линейка>/` с именем Вашего скина (в *snake_case*), где *линейка* - название линейки, которой принадлежит создаваемый скин (может уже существовать, а можете создать новую см. [Создание линейки скинов](#создание-линейки-скинов)).
2. В этой папке создайте ресурс типа `SkinData`, назовите именем Вашего скина (всё ещё в *snake_case*) и заполните в нём информацию:
    - В `Name` введите название Вашего скина.
    - В `ID` укажите идентификатор Вашего скина (на английском и в *snake_case*). Он должен отражать сущность скина, но подражать имени не обязан, так что можно вписать какую-нибудь связанную с создаваемым скином шутку :)
    - В `Rarity` укажите редкость скина. Как определяется редкость см. [`giving_rarity.md`](./giving_rarity.md#скины).
    - Во вкладке `About`:
        - В `Brief Description` введите краткое описание Вашего скина.
        - В `Custom * Vfx` поставьте галочку, если у Вашего скина есть особый эффект, указанный в этом свойстве.
        - В `Custom Animations` поставьте галочку, если у Вашего скина есть особые анимации (например, ходьба или анимация получения урона).
    - `Scene Path` и `Image Path` во вкладке `Paths` будут заполнены позже.
3. Создайте сцену с корневым узлом типа `PlayerSkin`, назовите её так же, как и папку Вашего скина. Имя корневого узла должно быть таким же, но в *PascalCase*. Сохраните и укажите её в `*.tres`-файле Вашего скина (свойство `Scene Path`).
4. Создайте скин. Обратитесь к инструкциям ниже для большей информации.
5. Для скина необходима его обложка разрешением 256 на 256 пикселей. Получите её скриншотом или любым другим способом и сохраните в `image.png` в папку Вашего скина.
6. Укажите полученный `image.png` в свойстве `Image Path` `*.tres`-файла Вашего скина.
7. Откройте `game/skins/<линейка>/common/<линейка>.tres` и добавьте `*.tres`-файл Вашего скина в свойство `Skins`.
8. Готово! Теперь Ваш скин можно выбрать в игре.

## Создание линейки скинов

1. Создайте папку в `game/skins/` с именем Вашей новой линейки в *snake_case*.
2. Создайте папку `common` в папке Вашей линейки. Здесь могут храниться ресурсы, общие для всех скинов этой линейки.
3. В папке `common` создайте ресурс типа `SkinsLineData`, назовите именем Вашего скина (всё ещё в *snake_case*) и заполните в нём информацию:
    - В `Name` введите название Вашей линейки скинов.
    - В `Brief Description` введите краткое описание Вашей линейки скинов.
    - В `Image Path` поместите обложку новой линейки с разрешением 784 на 160. Лучше всего эту картинку сохранять в папку `common` как `image.png`.
4. Откройте `game/core/items_db.tres` и добавьте `*.tres`-файл Вашей линейки скинов в свойство `Skins Lines`.
5. Готово! Теперь в эту линейку можно добавлять новые скины.

## Создания сцены скина

### Общие моменты

- В свойствах корневого узла сцены скина типа `PlayerSkin` есть некоторые интересные свойства для настраивания эффектов получения урона, смерти и т. д. Прочитайте документацию `PlayerSkin` в движке для большей информации.
- Скин должен примерно вписываться в круг радиусом 80 пикселей.
- Вы можете расширить поведение скина скриптом, чтобы он, к примеру, реагировал на смену оружия. Для этого нажмите кнопку "Расширить скрипт" в меню коренного узла `PlayerSkin`.
- Можно добавлять звуки через `AudioStreamPlayer2D`. Не забывайте устанавливать шину (`Bus`) на `SFX` и настраивать максимальную дистанцию.
- Оружие держится в точке (32, 32) в координатной системе Godot относительно центра скина.
- Не забывайте про [`drawing.md`](./drawing.md).

### Создание простого скина из картинки

- Используйте для картинки скина разрешение 160 на 160 (или чуть больше, если того требуют детали), а для `image.png` - 256 на 256.
- Скин на картинке должен смотреть вправо. Исключением может стать `image.png`,  если картинка скина нам привычнее в том виде, в котором она смотрит в левую сторону.

### Создание скина с анимациями

- Помните, что скин должен помещаться в окружность радиусом 80 пикселей. Могут быть детали, выходящие за него, однако их должно быть не слишком много и/или они не должны выходить слишком сильно.
- Используйте скрипт, чтобы подключиться к сигналам игрока и запускать нужную анимацию при их получении. Также можно читать свойства `entity/player_input`.
